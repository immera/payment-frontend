/*! For license information please see index.min.js.LICENSE.txt */
(()=>{var t={345:(t,e,r)=>{"use strict";function n(t,e){void 0===e&&(e={});var r=document.createElement("script");return r.src=t,Object.keys(e).forEach((function(t){r.setAttribute(t,e[t]),"data-csp-nonce"===t&&r.setAttribute("nonce",e["data-csp-nonce"])})),r}function a(t,e){if(void 0===e&&(e=s()),i(t,e),"undefined"==typeof window)return e.resolve(null);var r=function(t){var e="https://www.paypal.com/sdk/js";t.sdkBaseURL&&(e=t.sdkBaseURL,delete t.sdkBaseURL),function(t){var e=t["merchant-id"],r=t["data-merchant-id"],n="",a="";Array.isArray(e)?e.length>1?(n="*",a=e.toString()):n=e.toString():"string"==typeof e&&e.length>0?n=e:"string"==typeof r&&r.length>0&&(n="*",a=r),t["merchant-id"]=n,t["data-merchant-id"]=a}(t);var r,n,a=Object.keys(t).filter((function(e){return void 0!==t[e]&&null!==t[e]&&""!==t[e]})).reduce((function(e,r){var n=t[r].toString();return"data-"===r.substring(0,5)?e.dataAttributes[r]=n:e.queryParams[r]=n,e}),{queryParams:{},dataAttributes:{}}),o=a.queryParams,s=a.dataAttributes;return{url:"".concat(e,"?").concat((r=o,n="",Object.keys(r).forEach((function(t){0!==n.length&&(n+="&"),n+=t+"="+r[t]})),n)),dataAttributes:s}}(t),a=r.url,u=r.dataAttributes,l=u["data-namespace"]||"paypal",d=c(l);return function(t,e){var r=document.querySelector('script[src="'.concat(t,'"]'));if(null===r)return null;var a=n(t,e),o=r.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(a.dataset).length)return null;var s=!0;return Object.keys(o.dataset).forEach((function(t){o.dataset[t]!==a.dataset[t]&&(s=!1)})),s?r:null}(a,u)&&d?e.resolve(d):o({url:a,attributes:u},e).then((function(){var t=c(l);if(t)return t;throw new Error("The window.".concat(l," global variable is not available."))}))}function o(t,e){void 0===e&&(e=s()),i(t,e);var r=t.url,a=t.attributes;if("string"!=typeof r||0===r.length)throw new Error("Invalid url.");if(void 0!==a&&"object"!=typeof a)throw new Error("Expected attributes to be an object.");return new e((function(t,e){if("undefined"==typeof window)return t();var o,s,c,i;o={url:r,attributes:a,onSuccess:function(){return t()},onError:function(){var t=new Error('The script "'.concat(r,'" failed to load.'));return window.fetch?fetch(r).then((function(r){return 200===r.status&&e(t),r.text()})).then((function(t){var r=function(t){var e=t.split("/* Original Error:")[1];return e?e.replace(/\n/g,"").replace("*/","").trim():t}(t);e(new Error(r))})).catch((function(t){e(t)})):e(t)}},s=o.onSuccess,c=o.onError,(i=n(o.url,o.attributes)).onerror=c,i.onload=s,document.head.insertBefore(i,document.head.firstElementChild)}))}function s(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function c(t){return window[t]}function i(t,e){if("object"!=typeof t||null===t)throw new Error("Expected an options object.");if(void 0!==e&&"function"!=typeof e)throw new Error("Expected PromisePonyfill to be a function.")}r.r(e),r.d(e,{loadCustomScript:()=>o,loadScript:()=>a,version:()=>u});var u="5.0.6"},138:(t,e,r)=>{const{loadScript:n}=r(345);t.exports=function(t,e){this.settings=t,this.axios=e,this.stripe=Stripe(t.key),this.paypal=null,this.customer=t.customer,this.__proto__={requestPayment(t,e){return this.axios.post("/payment/request",{return_url:this.settings.callback,payment_method:t,...e})},cardList(){return this.axios.get("/payment/cards")},createNewCard(t){this.axios.post("/payment/cards",{...t}).then(console.log).catch(console.error)},deleteCard(t){return this.axios.delete(`/payment/cards/${t}`).then(console.log).catch(console.error)},alipay(t){return this.requestPayment("alipay",t).then((({data:t})=>{this.stripe.confirmAlipayPayment(t.response.client_secret,{return_url:t.callback}).then((t=>{t.error&&console.error(error)})).catch(console.error)}))},wechat_pay(t){return this.requestPayment("wechat_pay",t).then((({data:t})=>{this.stripe.confirmWechatPayPayment(t.response.client_secret,{payment_method_options:{wechat_pay:{client:"web"}}}).then((({error:e,paymentIntent:r})=>{e?console.error(e):console.log(t,r)}))}))},initCard(t){const e=this.stripe.elements();this.cardElem=e.create("card"),this.cardElem.mount(t)},async initPaypalBtn(t,{currency:e,amount:r}){e=e.toUpperCase(),r=(Number(r)/100).toFixed(2),paymentPkg=this;try{this.paypal=await n({"client-id":paymentPkg.settings.paypalClientId,currency:e})}catch(t){console.error("failed to load the PayPal JS SDK script",t)}if(paypal)try{await this.paypal.Buttons({style:{layout:"horizontal",color:"black",tagline:!1},createOrder:(t,n)=>(console.log("Create Order Data:",t),paymentPkg.requestPayment("paypal",{currency:e,amount:r}).then((({data:t})=>t.response)).then((({id:t})=>t)).catch(console.error)),onApprove(t,e){const{orderID:r}=t;return paymentPkg.axios.post(`payment/paypal/order/${r}/capture`).then(console.log).then((t=>{window.location.href=paymentPkg.settings.callback})).catch(console.error)},onCancel({orderID:t}){paymentPkg.axios.post("/payment/callback",{payment_intent:t,redirect_status:"canceled",dont_redirect:!0})},onError(t){console.error(t)}}).render(t)}catch(t){console.error("failed to render the PayPal Buttons",t)}},cardDepricated(t){return this.requestPayment("card",t).then((({data:t})=>{this.stripe.confirmCardPayment(t.response.client_secret,{payment_method:{card:this.cardElem}}).then((t=>{t.error&&console.error(error),console.log("Possibly successful payment"),console.log(t)})).catch(console.error)}))},card(t){return this.requestPayment("card",t).then(console.log).catch(console.error)},multibanco(t){return this.requestPayment("multibanco",t).then((({data:t})=>t.response)).then((({multibanco:t,status:e,currency:r,amount:n})=>({multibanco:{entity:t.entity,reference:t.reference},status:e,currency:r,amount:n})))},pay({payment_method:t,...e}){return this[t](e)},bank_transfer(t){return this.requestPayment("bank_transfer",t)},cash(t){return this.requestPayment("cash",t)},ack(t,e){return this.axios.put(`/payment/instances/${t}/ack`,{status:e})},get(t){return this.axios.get("/payment/instances",t)}}}}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(138)})();